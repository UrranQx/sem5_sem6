# ПЛАН ТЕСТИРОВАНИЯ

## Мобильное приложение «KPI Dashboard»

### для операционной системы Android

---

**Версия документа:** 1.0  
**Дата создания:** 29.11.2025  
**Статус:** Проект  
**Связанный документ:** KPI_ANDROID_APP_TECHNICAL_SPECIFICATION.md

---

## СОДЕРЖАНИЕ

1. [Введение](#1-введение)
2. [Объём тестирования](#2-объём-тестирования)
3. [Стратегия тестирования](#3-стратегия-тестирования)
4. [Типы тестирования](#4-типы-тестирования)
5. [Тестовые сценарии](#5-тестовые-сценарии)
6. [Критерии входа и выхода](#6-критерии-входа-и-выхода)
7. [Управление дефектами](#7-управление-дефектами)
8. [Среда тестирования](#8-среда-тестирования)
9. [Риски и ограничения](#9-риски-и-ограничения)
10. [Расписание тестирования](#10-расписание-тестирования)
11. [Роли и ответственности](#11-роли-и-ответственности)
12. [Приложения](#12-приложения)

---

## 1. ВВЕДЕНИЕ

### 1.1 Цель документа

Настоящий документ определяет стратегию, методы, критерии и процедуры тестирования мобильного приложения «KPI Dashboard» для операционной системы Android. План тестирования разработан в соответствии с требованиями ГОСТ 34.603-92 «Виды испытаний автоматизированных систем» и IEEE 829-2008 «Standard for Software and System Test Documentation».

### 1.2 Область применения

План тестирования распространяется на:
- Мобильное приложение «KPI Dashboard» для Android
- Backend API для взаимодействия с базой данных
- Интеграции с внешними системами (ЕСИА, VK ID)

### 1.3 Ссылочные документы

| № | Документ | Описание |
|---|----------|----------|
| 1 | KPI_ANDROID_APP_TECHNICAL_SPECIFICATION.md | Техническое задание |
| 2 | ГОСТ 34.603-92 | Виды испытаний автоматизированных систем |
| 3 | IEEE 829-2008 | Standard for Software and System Test Documentation |
| 4 | ISO/IEC 25010:2011 | Systems and software Quality Requirements and Evaluation |

### 1.4 Глоссарий

| Термин | Определение |
|--------|-------------|
| **Smoke-тест** | Базовая проверка работоспособности основных функций |
| **Регрессионный тест** | Проверка отсутствия побочных эффектов после внесения изменений |
| **E2E (End-to-End)** | Сквозное тестирование полного пользовательского сценария |
| **SUT (System Under Test)** | Тестируемая система |
| **TC (Test Case)** | Тестовый случай |
| **TS (Test Suite)** | Набор тестов |
| **UAT** | User Acceptance Testing — приёмочное тестирование |

---

## 2. ОБЪЁМ ТЕСТИРОВАНИЯ

### 2.1 Функциональность, подлежащая тестированию

| ID | Модуль | Функциональность | Приоритет |
|----|--------|------------------|-----------|
| SCOPE-001 | AUTH | Аутентификация через ЕСИА (Госуслуги) | Высокий |
| SCOPE-002 | AUTH | Аутентификация через VK ID | Высокий |
| SCOPE-003 | AUTH | Сохранение и восстановление сессии | Высокий |
| SCOPE-004 | AUTH | Выход из аккаунта | Высокий |
| SCOPE-005 | AUTH | Обработка ошибок авторизации | Высокий |
| SCOPE-006 | PROFILE | Отображение карточки пользователя | Высокий |
| SCOPE-007 | PROFILE | Отображение ФИО, фото, отдела | Высокий |
| SCOPE-008 | PROFILE | Отображение KPI (формат X.XX) | Высокий |
| SCOPE-009 | PROFILE | Отображение стажа работы | Средний |
| SCOPE-010 | PROFILE | График KPI за месяц | Средний |
| SCOPE-011 | PROFILE | Pull-to-Refresh обновление | Средний |
| SCOPE-012 | LEADERBOARD | Таблица лидеров (сортировка по KPI) | Высокий |
| SCOPE-013 | LEADERBOARD | Визуальное выделение топ-3 (золото/серебро/бронза) | Высокий |
| SCOPE-014 | LEADERBOARD | Фильтрация по отделам | Высокий |
| SCOPE-015 | LEADERBOARD | Пагинация списка | Средний |
| SCOPE-016 | LEADERBOARD | Выделение текущего пользователя | Низкий |
| SCOPE-017 | SETTINGS | Выход из аккаунта | Высокий |
| SCOPE-018 | SETTINGS | Информация о приложении | Низкий |
| SCOPE-019 | SETTINGS | Политика конфиденциальности | Средний |
| SCOPE-020 | NAV | Bottom Navigation Bar | Высокий |
| SCOPE-021 | NAV | Переключение между экранами | Высокий |
| SCOPE-022 | NAV | Сохранение состояния экранов | Средний |

### 2.2 Функциональность, исключённая из тестирования

| ID | Функциональность | Причина исключения |
|----|------------------|--------------------|
| EXCL-001 | Административная панель | Не входит в scope мобильного приложения |
| EXCL-002 | Редактирование KPI | Только просмотр данных |
| EXCL-003 | Push-уведомления | Опциональная функция, отложена на следующий релиз |

---

## 3. СТРАТЕГИЯ ТЕСТИРОВАНИЯ

### 3.1 Уровни тестирования

```
┌─────────────────────────────────────────────────────────────┐
│                    Пирамида тестирования                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                        ▲                                    │
│                       / \         E2E / UAT                 │
│                      /   \        (10% тестов)              │
│                     /─────\                                 │
│                    /       \      Интеграционные            │
│                   /         \     (20% тестов)              │
│                  /───────────\                              │
│                 /             \   Unit-тесты                │
│                /               \  (70% тестов)              │
│               /─────────────────\                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 Распределение тестов по уровням

| Уровень | Процент | Инструменты | Ответственный |
|---------|---------|-------------|---------------|
| Unit-тесты | 70% | JUnit 5, Mockk, Turbine | Разработчики |
| Интеграционные | 20% | Espresso, Hilt Testing | QA + Разработчики |
| E2E / UI | 10% | Espresso, UI Automator | QA |

### 3.3 Подход к автоматизации

| Категория | Автоматизация | Обоснование |
|-----------|---------------|-------------|
| Unit-тесты | 100% | Быстрая обратная связь, высокая ROI |
| API-тесты | 100% | Стабильность, повторяемость |
| UI Smoke-тесты | 100% | Критические пути пользователя |
| UI регрессия | 80% | Основные сценарии |
| Exploratory | 0% | Требует человеческой креативности |

---

## 4. ТИПЫ ТЕСТИРОВАНИЯ

### 4.1 Функциональное тестирование

#### 4.1.1 Unit-тестирование

**Цель:** Проверка корректности работы отдельных компонентов (ViewModel, Repository, UseCase)

**Покрытие кода:** ≥ 70%

**Инструменты:**
- JUnit 5
- Mockk
- Turbine (для Flow)
- Kotlinx Coroutines Test

**Области тестирования:**

| Компонент | Что тестируется |
|-----------|-----------------|
| ViewModel | Состояния UI, обработка событий, преобразование данных |
| UseCase | Бизнес-логика, валидация |
| Repository | Взаимодействие с источниками данных |
| Mapper | Преобразование моделей данных |
| Utils | Вспомогательные функции (форматирование KPI, стажа) |

#### 4.1.2 Интеграционное тестирование

**Цель:** Проверка корректности взаимодействия между компонентами

**Инструменты:**
- Hilt Testing
- Room Testing
- MockWebServer (OkHttp)
- Espresso

**Области тестирования:**

| Интеграция | Что тестируется |
|------------|-----------------|
| API + Repository | Парсинг ответов, обработка ошибок |
| Room + Repository | Кэширование, синхронизация |
| ViewModel + UseCase | Взаимодействие слоёв |
| Navigation | Переходы между экранами |

#### 4.1.3 UI-тестирование (End-to-End)

**Цель:** Проверка пользовательских сценариев от начала до конца

**Инструменты:**
- Espresso
- Compose Testing
- UI Automator (для системных диалогов OAuth)

**Тестируемые сценарии:**
1. Полный flow авторизации
2. Просмотр карточки пользователя
3. Навигация по таблице лидеров
4. Фильтрация по отделам
5. Выход из аккаунта

### 4.2 Нефункциональное тестирование

#### 4.2.1 Тестирование производительности

| Метрика | Целевое значение | Метод измерения |
|---------|-----------------|-----------------|
| Время холодного запуска | ≤ 3 сек | Android Profiler, Firebase Performance |
| Время горячего запуска | ≤ 1 сек | Android Profiler |
| Время отклика API | ≤ 500 мс (p95) | Логирование OkHttp |
| FPS UI | ≥ 60 FPS | GPU Profiler |
| Потребление RAM | ≤ 150 MB | Memory Profiler |
| Размер APK | ≤ 30 MB | Build Analyzer |

**Инструменты:**
- Android Studio Profiler
- Firebase Performance Monitoring
- Macrobenchmark

#### 4.2.2 Тестирование безопасности

| ID | Проверка | Метод |
|----|----------|-------|
| SEC-T-001 | Хранение токенов в EncryptedSharedPreferences | Ручная проверка, анализ кода |
| SEC-T-002 | Отсутствие PII в логах | Ручная проверка LogCat |
| SEC-T-003 | Certificate Pinning работает | Тест с прокси (Charles/mitmproxy) |
| SEC-T-004 | Обфускация кода (R8) | Декомпиляция APK (jadx) |
| SEC-T-005 | HTTPS для всех запросов | Анализ трафика |
| SEC-T-006 | Обнаружение root | Тест на rooted-устройстве |
| SEC-T-007 | SQL-инъекции (API) | Ручное тестирование |
| SEC-T-008 | Токен не передаётся в query params | Анализ запросов |

**Инструменты:**
- OWASP ZAP
- MobSF (Mobile Security Framework)
- Frida
- Charles Proxy

#### 4.2.3 Тестирование совместимости

**Матрица устройств:**

| Устройство | Android | Разрешение | Плотность | Приоритет |
|------------|---------|------------|-----------|-----------|
| Samsung Galaxy S24 | 14 | 1080x2340 | xxhdpi | Высокий |
| Google Pixel 8 | 14 | 1080x2400 | xxhdpi | Высокий |
| Samsung Galaxy A54 | 13 | 1080x2340 | xhdpi | Высокий |
| Xiaomi Redmi Note 12 | 13 | 1080x2400 | xhdpi | Средний |
| Samsung Galaxy S21 | 12 | 1080x2400 | xxhdpi | Средний |
| Google Pixel 6a | 13 | 1080x2400 | xhdpi | Средний |
| Samsung Galaxy A13 | 12 | 1080x2408 | xhdpi | Средний |
| Huawei P30 Lite | 10 | 1080x2312 | xhdpi | Низкий |
| Samsung Galaxy A10 | 9 | 720x1520 | hdpi | Низкий |
| Эмулятор Android 8.0 | 8.0 | 1080x1920 | xxhdpi | Низкий |

**Тестируемые аспекты:**
- Корректность отображения UI
- Работа навигации
- Производительность
- Работа авторизации

#### 4.2.4 Тестирование локализации

| ID | Проверка | Ожидаемый результат |
|----|----------|---------------------|
| L10N-001 | Все тексты на русском языке | Нет английских строк в UI |
| L10N-002 | Корректное склонение (1 год, 2 года, 5 лет) | Правильные окончания |
| L10N-003 | Формат чисел (разделитель X.XX) | Точка как десятичный разделитель |
| L10N-004 | Длинные тексты не обрезаются | Текст полностью виден или с многоточием |
| L10N-005 | RTL не поддерживается | Приложение только LTR |

#### 4.2.5 Тестирование доступности (Accessibility)

| ID | Проверка | Критерий WCAG |
|----|----------|---------------|
| A11Y-001 | Content descriptions для изображений | 1.1.1 Non-text Content |
| A11Y-002 | Контрастность текста ≥ 4.5:1 | 1.4.3 Contrast |
| A11Y-003 | Размер touch targets ≥ 48dp | 2.5.5 Target Size |
| A11Y-004 | Поддержка TalkBack | 1.3.1 Info and Relationships |
| A11Y-005 | Навигация с клавиатуры | 2.1.1 Keyboard |
| A11Y-006 | Отсутствие мигающего контента | 2.3.1 Three Flashes |

**Инструменты:**
- Accessibility Scanner (Google)
- TalkBack
- Espresso Accessibility Checks

#### 4.2.6 Тестирование сетевых условий

| Сценарий | Ожидаемое поведение |
|----------|---------------------|
| Нет сети | Отображение кэшированных данных + сообщение |
| Медленная сеть (2G) | Индикатор загрузки, таймаут 30 сек |
| Нестабильная сеть | Retry механизм, уведомление пользователя |
| Переключение Wi-Fi/Mobile | Бесшовное продолжение работы |
| Потеря сети во время запроса | Сообщение об ошибке + кнопка "Повторить" |

**Инструменты:**
- Android Emulator (Network throttling)
- Charles Proxy (Throttling)

---

## 5. ТЕСТОВЫЕ СЦЕНАРИИ

### 5.1 Модуль аутентификации (AUTH)

#### TS-AUTH-001: Аутентификация через Госуслуги

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-AUTH-001 | Успешная авторизация через ЕСИА | Пользователь зарегистрирован в системе | 1. Открыть приложение<br>2. Нажать "Войти через Госуслуги"<br>3. Ввести учётные данные ЕСИА<br>4. Подтвердить вход | Пользователь авторизован, открыт главный экран | Высокий |
| TC-AUTH-002 | Отмена авторизации ЕСИА | — | 1. Открыть приложение<br>2. Нажать "Войти через Госуслуги"<br>3. Нажать "Отмена" в WebView | Возврат на экран выбора авторизации | Высокий |
| TC-AUTH-003 | Ошибка авторизации ЕСИА (неверные данные) | — | 1. Открыть приложение<br>2. Нажать "Войти через Госуслуги"<br>3. Ввести неверные учётные данные | Сообщение об ошибке от ЕСИА | Высокий |
| TC-AUTH-004 | Пользователь не найден в БД | Учётная запись ЕСИА есть, но не привязана к сотруднику | 1. Авторизоваться через ЕСИА | Сообщение "Пользователь не найден в системе" | Высокий |
| TC-AUTH-005 | Таймаут авторизации ЕСИА | Нестабильное соединение | 1. Начать авторизацию<br>2. Ждать 30+ секунд | Сообщение о таймауте + кнопка "Повторить" | Средний |

#### TS-AUTH-002: Аутентификация через VK ID

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-AUTH-006 | Успешная авторизация через VK ID | Пользователь зарегистрирован в системе | 1. Открыть приложение<br>2. Нажать "Войти через ВКонтакте"<br>3. Авторизоваться в VK | Пользователь авторизован, открыт главный экран | Высокий |
| TC-AUTH-007 | Авторизация через VK приложение | Установлено приложение VK | 1. Нажать "Войти через ВКонтакте" | Открытие VK для подтверждения, возврат в приложение | Высокий |
| TC-AUTH-008 | Авторизация через VK WebView | Не установлено приложение VK | 1. Нажать "Войти через ВКонтакте" | Открытие WebView с формой входа VK | Высокий |
| TC-AUTH-009 | Отказ в доступе VK | — | 1. Начать авторизацию VK<br>2. Нажать "Отклонить" | Возврат на экран авторизации | Средний |

#### TS-AUTH-003: Управление сессией

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-AUTH-010 | Сохранение сессии | Пользователь авторизован | 1. Закрыть приложение<br>2. Открыть приложение | Автоматический вход без авторизации | Высокий |
| TC-AUTH-011 | Автообновление Access Token | Access Token истёк, Refresh Token валиден | 1. Дождаться истечения Access Token<br>2. Выполнить запрос к API | Токен обновлён автоматически, запрос выполнен | Высокий |
| TC-AUTH-012 | Истечение Refresh Token | Refresh Token истёк | 1. Дождаться истечения Refresh Token<br>2. Открыть приложение | Перенаправление на экран авторизации | Высокий |
| TC-AUTH-013 | Выход из аккаунта | Пользователь авторизован | 1. Перейти в Настройки<br>2. Нажать "Выйти"<br>3. Подтвердить выход | Сессия удалена, открыт экран авторизации | Высокий |
| TC-AUTH-014 | Отмена выхода из аккаунта | Пользователь авторизован | 1. Перейти в Настройки<br>2. Нажать "Выйти"<br>3. Нажать "Отмена" | Пользователь остаётся авторизован | Средний |

---

### 5.2 Модуль «Карточка пользователя» (PROFILE)

#### TS-PROFILE-001: Отображение данных профиля

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-PROFILE-001 | Отображение ФИО | Пользователь авторизован | 1. Открыть карточку пользователя | ФИО отображается в формате "Фамилия Имя Отчество" | Высокий |
| TC-PROFILE-002 | Отображение фотографии | Фото есть в БД | 1. Открыть карточку | Фотография загружена и отображается | Высокий |
| TC-PROFILE-003 | Placeholder при отсутствии фото | Фото отсутствует | 1. Открыть карточку | Отображается placeholder (иконка person) | Средний |
| TC-PROFILE-004 | Отображение названия отдела | — | 1. Открыть карточку | Название отдела отображается полностью | Высокий |
| TC-PROFILE-005 | Отображение KPI | KPI = 8.75 | 1. Открыть карточку | KPI отображается как "8.75" | Высокий |
| TC-PROFILE-006 | Формат KPI с нулями | KPI = 9.00 | 1. Открыть карточку | KPI отображается как "9.00" | Высокий |
| TC-PROFILE-007 | Отображение стажа | Стаж на позиции 1 год, в компании 3 года | 1. Открыть карточку | Отображается "1 год (3 года всего)" | Высокий |
| TC-PROFILE-008 | Склонение стажа (2 года) | Стаж 2 года | 1. Открыть карточку | "2 года" (не "2 год" или "2 лет") | Средний |
| TC-PROFILE-009 | Склонение стажа (5 лет) | Стаж 5 лет | 1. Открыть карточку | "5 лет" | Средний |
| TC-PROFILE-010 | Склонение стажа (21 год) | Стаж 21 год | 1. Открыть карточку | "21 год" | Низкий |

#### TS-PROFILE-002: График KPI

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-PROFILE-011 | Отображение графика за месяц | Есть данные за 30 дней | 1. Открыть карточку<br>2. Прокрутить до графика | График отображает 30 точек данных | Средний |
| TC-PROFILE-012 | Ось X графика (дни) | — | 1. Просмотреть график | Ось X содержит даты/дни месяца | Средний |
| TC-PROFILE-013 | Ось Y графика (KPI) | — | 1. Просмотреть график | Ось Y содержит значения KPI | Средний |
| TC-PROFILE-014 | Отсутствие данных для графика | Нет данных за месяц | 1. Открыть карточку | Сообщение "Нет данных для отображения" | Средний |
| TC-PROFILE-015 | Частичные данные для графика | Данные за 15 дней | 1. Открыть карточку | График отображает доступные 15 точек | Низкий |

#### TS-PROFILE-003: Обновление данных

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-PROFILE-016 | Pull-to-Refresh | Пользователь на карточке | 1. Потянуть экран вниз | Индикатор загрузки, данные обновлены | Средний |
| TC-PROFILE-017 | Автообновление при открытии | — | 1. Перейти на другой экран<br>2. Вернуться на карточку | Запрос актуальных данных с сервера | Средний |
| TC-PROFILE-018 | Ошибка загрузки данных | Сервер недоступен | 1. Открыть карточку | Сообщение об ошибке + кнопка "Повторить" | Высокий |
| TC-PROFILE-019 | Offline-режим | Нет сети, есть кэш | 1. Отключить сеть<br>2. Открыть карточку | Кэшированные данные + пометка "Offline" | Средний |

---

### 5.3 Модуль «Таблица лидеров» (LEADERBOARD)

#### TS-LB-001: Отображение списка

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-LB-001 | Сортировка по KPI (DESC) | Есть 10+ сотрудников | 1. Открыть таблицу лидеров | Список отсортирован по KPI от большего к меньшему | Высокий |
| TC-LB-002 | Уникальные позиции | — | 1. Открыть таблицу | Каждая позиция (1, 2, 3...) уникальна | Высокий |
| TC-LB-003 | Отображение данных записи | — | 1. Открыть таблицу | Каждая запись содержит: позицию, ФИО, отдел, KPI | Высокий |
| TC-LB-004 | Формат KPI в списке | KPI = 9.45 | 1. Открыть таблицу | KPI отображается как "9.45" | Высокий |

#### TS-LB-002: Визуальное выделение топ-3

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-LB-005 | Золотая обводка (1 место) | — | 1. Открыть таблицу лидеров | 1-е место имеет золотую обводку (#FFD700) | Высокий |
| TC-LB-006 | Иконка трофея (1 место) | — | 1. Открыть таблицу | Рядом с 1-м местом отображается иконка трофея | Высокий |
| TC-LB-007 | Серебряная обводка (2 место) | — | 1. Открыть таблицу | 2-е место имеет серебряную обводку (#C0C0C0) | Высокий |
| TC-LB-008 | Бронзовая обводка (3 место) | — | 1. Открыть таблицу | 3-е место имеет бронзовую обводку (#CD7F32) | Высокий |
| TC-LB-009 | Обычный стиль (4+ место) | — | 1. Открыть таблицу | Позиции 4+ без специальной обводки | Средний |

#### TS-LB-003: Фильтрация по отделам

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-LB-010 | Фильтр "Все отделы" по умолчанию | — | 1. Открыть таблицу лидеров | Выбран фильтр "Все отделы" | Высокий |
| TC-LB-011 | Открытие выпадающего списка | — | 1. Нажать на фильтр отделов | Отображается список всех отделов | Высокий |
| TC-LB-012 | Фильтрация по отделу | Есть отдел "Разработка" | 1. Открыть фильтр<br>2. Выбрать "Разработка" | Отображаются только сотрудники отдела "Разработка" | Высокий |
| TC-LB-013 | Пересчёт позиций при фильтрации | — | 1. Применить фильтр по отделу | Позиции пересчитаны (начинаются с 1) | Высокий |
| TC-LB-014 | Сброс фильтра | Применён фильтр | 1. Выбрать "Все отделы" | Отображаются все сотрудники | Средний |
| TC-LB-015 | Пустой результат фильтрации | Отдел без сотрудников | 1. Выбрать пустой отдел | Сообщение "Нет данных" | Средний |

#### TS-LB-004: Пагинация и скролл

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-LB-016 | Загрузка первой страницы | Более 20 сотрудников | 1. Открыть таблицу | Загружено 20 записей | Средний |
| TC-LB-017 | Подгрузка следующей страницы | Более 20 сотрудников | 1. Прокрутить список до конца | Подгружены следующие 20 записей | Средний |
| TC-LB-018 | Индикатор загрузки пагинации | — | 1. Прокрутить до конца | Индикатор загрузки внизу списка | Низкий |
| TC-LB-019 | Конец списка | Просмотрены все записи | 1. Прокрутить до конца | Нет дополнительной подгрузки | Низкий |

#### TS-LB-005: Выделение текущего пользователя

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-LB-020 | Выделение строки текущего пользователя | Пользователь в списке | 1. Открыть таблицу<br>2. Найти свою запись | Строка текущего пользователя выделена фоном | Низкий |
| TC-LB-021 | Выделение сохраняется при фильтрации | — | 1. Применить фильтр своего отдела | Строка остаётся выделенной | Низкий |

---

### 5.4 Модуль «Настройки» (SETTINGS)

#### TS-SETTINGS-001: Основные функции

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-SET-001 | Отображение версии приложения | — | 1. Открыть настройки | Версия отображается в формате X.Y.Z | Средний |
| TC-SET-002 | Открытие политики конфиденциальности | — | 1. Нажать "Политика конфиденциальности" | Открывается WebView/браузер с документом | Средний |
| TC-SET-003 | Открытие пользовательского соглашения | — | 1. Нажать "Пользовательское соглашение" | Открывается WebView/браузер с документом | Средний |
| TC-SET-004 | Раздел "О приложении" | — | 1. Нажать "О приложении" | Отображается информация о приложении | Низкий |

---

### 5.5 Модуль навигации (NAV)

#### TS-NAV-001: Bottom Navigation Bar

| TC ID | Название | Предусловия | Шаги | Ожидаемый результат | Приоритет |
|-------|----------|-------------|------|---------------------|-----------|
| TC-NAV-001 | Отображение 3 элементов | Пользователь авторизован | 1. Посмотреть нижнюю панель | Видны 3 элемента: Карточка, Лидеры, Настройки | Высокий |
| TC-NAV-002 | Иконки и подписи | — | 1. Посмотреть элементы навигации | Каждый элемент имеет иконку и подпись | Высокий |
| TC-NAV-003 | Выделение активного элемента | — | 1. Открыть Карточку<br>2. Посмотреть навигацию | Элемент "Карточка" визуально выделен | Высокий |
| TC-NAV-004 | Переход на Карточку | — | 1. Нажать "Карточка" | Открыт экран карточки пользователя | Высокий |
| TC-NAV-005 | Переход на Лидеры | — | 1. Нажать "Лидеры" | Открыт экран таблицы лидеров | Высокий |
| TC-NAV-006 | Переход на Настройки | — | 1. Нажать "Настройки" | Открыт экран настроек | Высокий |
| TC-NAV-007 | Сохранение позиции скролла | Прокручен список лидеров | 1. Перейти на Карточку<br>2. Вернуться на Лидеры | Позиция скролла сохранена | Средний |
| TC-NAV-008 | Сохранение фильтра | Применён фильтр отдела | 1. Перейти на Настройки<br>2. Вернуться на Лидеры | Фильтр сохранён | Средний |

---

### 5.6 Тесты производительности

| TC ID | Название | Метрика | Целевое значение | Метод |
|-------|----------|---------|------------------|-------|
| TC-PERF-001 | Холодный запуск | Время | ≤ 3000 мс | Macrobenchmark |
| TC-PERF-002 | Горячий запуск | Время | ≤ 1000 мс | Macrobenchmark |
| TC-PERF-003 | Загрузка карточки | Время | ≤ 1000 мс | Логирование |
| TC-PERF-004 | Загрузка таблицы лидеров | Время | ≤ 2000 мс | Логирование |
| TC-PERF-005 | Скролл таблицы (60 FPS) | Dropped frames | < 5% | GPU Profiler |
| TC-PERF-006 | Потребление RAM | Память | ≤ 150 MB | Memory Profiler |
| TC-PERF-007 | Размер APK | Размер | ≤ 30 MB | Build |

---

### 5.7 Тесты безопасности

| TC ID | Название | Проверка | Метод |
|-------|----------|----------|-------|
| TC-SEC-001 | Хранение токенов | Токены в EncryptedSharedPreferences | Анализ кода + ADB |
| TC-SEC-002 | Логирование PII | Нет PII в LogCat | Ручная проверка |
| TC-SEC-003 | HTTPS | Все запросы через HTTPS | Charles Proxy |
| TC-SEC-004 | Certificate Pinning | Ошибка при MitM | Charles Proxy |
| TC-SEC-005 | Обфускация | Код обфусцирован | jadx декомпиляция |
| TC-SEC-006 | Root detection | Предупреждение на rooted устройстве | Rooted эмулятор |
| TC-SEC-007 | Session hijacking | Невозможность перехвата сессии | Frida |
| TC-SEC-008 | SQL Injection (API) | Защита от инъекций | Ручное тестирование |

---

## 6. КРИТЕРИИ ВХОДА И ВЫХОДА

### 6.1 Критерии входа в тестирование

| ID | Критерий | Верификация |
|----|----------|-------------|
| ENTRY-001 | Код скомпилирован без ошибок | CI build passed |
| ENTRY-002 | Unit-тесты проходят (≥95%) | CI test results |
| ENTRY-003 | Тестовая среда развёрнута | Чек-лист проверки среды |
| ENTRY-004 | Тестовые данные подготовлены | Скрипты инициализации выполнены |
| ENTRY-005 | Документация актуальна | Код-ревью пройден |
| ENTRY-006 | Предыдущие блокирующие дефекты закрыты | Jira статус |

### 6.2 Критерии выхода из тестирования

| ID | Критерий | Пороговое значение |
|----|----------|-------------------|
| EXIT-001 | Покрытие требований тестами | 100% обязательных требований |
| EXIT-002 | Выполнение тестов | 100% запланированных тестов выполнено |
| EXIT-003 | Дефекты Critical/Blocker | 0 открытых |
| EXIT-004 | Дефекты Major | ≤ 3 открытых |
| EXIT-005 | Дефекты Minor | ≤ 10 открытых |
| EXIT-006 | Код-покрытие unit-тестами | ≥ 70% |
| EXIT-007 | Метрики производительности | Все в пределах целевых значений |
| EXIT-008 | Метрики безопасности | Нет критических уязвимостей |

### 6.3 Критерии приостановки тестирования

| ID | Критерий |
|----|----------|
| SUSPEND-001 | Критический дефект, блокирующий >50% функционала |
| SUSPEND-002 | Недоступность тестовой среды >4 часов |
| SUSPEND-003 | Обнаружена критическая уязвимость безопасности |
| SUSPEND-004 | Изменение требований, затрагивающее >30% функционала |

---

## 7. УПРАВЛЕНИЕ ДЕФЕКТАМИ

### 7.1 Классификация дефектов по серьёзности

| Уровень | Описание | Пример | SLA исправления |
|---------|----------|--------|-----------------|
| **Blocker** | Полная неработоспособность системы | Приложение не запускается | 4 часа |
| **Critical** | Невозможность использования основной функции | Авторизация не работает | 8 часов |
| **Major** | Функция работает некорректно, есть workaround | KPI отображается без десятичных знаков | 24 часа |
| **Minor** | Косметический дефект, не влияет на функциональность | Неправильный цвет обводки | 72 часа |
| **Trivial** | Незначительное улучшение | Опечатка в тексте | Backlog |

### 7.2 Классификация дефектов по приоритету

| Приоритет | Описание |
|-----------|----------|
| **P1 - Urgent** | Исправить немедленно |
| **P2 - High** | Исправить в текущем спринте |
| **P3 - Medium** | Исправить в следующем спринте |
| **P4 - Low** | Исправить при возможности |

### 7.3 Жизненный цикл дефекта

```
┌─────────┐    ┌──────────┐    ┌─────────────┐    ┌──────────┐    ┌────────┐
│   New   │───▶│  Assigned │───▶│ In Progress │───▶│  Resolved │───▶│ Closed │
└─────────┘    └──────────┘    └─────────────┘    └──────────┘    └────────┘
     │              │                │                  │              ▲
     │              │                │                  │              │
     │              ▼                ▼                  ▼              │
     │         ┌────────┐      ┌──────────┐       ┌──────────┐        │
     └────────▶│Rejected│      │ On Hold  │       │ Reopened │────────┘
               └────────┘      └──────────┘       └──────────┘
```

### 7.4 Шаблон отчёта о дефекте

```
ID: [BUG-XXX]
Заголовок: [Краткое описание]
Серьёзность: [Blocker/Critical/Major/Minor/Trivial]
Приоритет: [P1/P2/P3/P4]
Компонент: [AUTH/PROFILE/LEADERBOARD/SETTINGS/NAV/API]
Версия: [X.Y.Z]
Устройство: [Модель, Android версия]

Предусловия:
[Описание начального состояния]

Шаги воспроизведения:
1. [Шаг 1]
2. [Шаг 2]
3. [Шаг 3]

Ожидаемый результат:
[Что должно произойти]

Фактический результат:
[Что произошло на самом деле]

Вложения:
- Скриншот/видео
- Логи
```

---

## 8. СРЕДА ТЕСТИРОВАНИЯ

### 8.1 Аппаратное обеспечение

| Тип | Устройство | Характеристики |
|-----|------------|----------------|
| Физическое устройство | Samsung Galaxy S24 | Android 14, 8GB RAM, 1080x2340 |
| Физическое устройство | Google Pixel 8 | Android 14, 8GB RAM, 1080x2400 |
| Физическое устройство | Samsung Galaxy A54 | Android 13, 6GB RAM, 1080x2340 |
| Эмулятор | Pixel 6 API 34 | Android 14, 4GB RAM |
| Эмулятор | Pixel 4 API 26 | Android 8.0, 2GB RAM |

### 8.2 Программное обеспечение

| Компонент | Версия |
|-----------|--------|
| Android Studio | Hedgehog 2023.1.1+ |
| Gradle | 8.2+ |
| JDK | 17 |
| Kotlin | 1.9.x |

### 8.3 Тестовые серверы

| Среда | URL | Назначение |
|-------|-----|------------|
| Development | dev-api.example.com | Разработка |
| Staging | staging-api.example.com | Тестирование |
| Production | api.example.com | Продакшен (только smoke) |

### 8.4 Тестовые данные

| Набор данных | Описание | Количество |
|--------------|----------|------------|
| Сотрудники | Тестовые сотрудники | 100 |
| Отделы | Тестовые отделы | 10 |
| KPI записи | Исторические данные KPI | 3000 |
| Учётные записи | Тестовые OAuth аккаунты | 5 |

### 8.5 Инструменты тестирования

| Категория | Инструмент | Назначение |
|-----------|------------|------------|
| Unit-тесты | JUnit 5, Mockk | Модульное тестирование |
| UI-тесты | Espresso, Compose Testing | UI автотесты |
| Производительность | Android Profiler, Macrobenchmark | Профилирование |
| Безопасность | MobSF, OWASP ZAP | Анализ безопасности |
| API-тесты | Postman, MockWebServer | Тестирование API |
| Отчётность | Allure | Отчёты о тестировании |
| CI/CD | GitHub Actions | Автоматизация |
| Баг-трекинг | Jira | Управление дефектами |

---

## 9. РИСКИ И ОГРАНИЧЕНИЯ

### 9.1 Риски тестирования

| ID | Риск | Вероятность | Влияние | Митигация |
|----|------|-------------|---------|-----------|
| RISK-001 | Недоступность ЕСИА тестовой среды | Средняя | Высокое | Mock-сервер для OAuth |
| RISK-002 | Недостаток тестовых устройств | Низкая | Среднее | Firebase Test Lab |
| RISK-003 | Изменение API VK ID | Низкая | Высокое | Мониторинг документации VK |
| RISK-004 | Недостаток времени на тестирование | Средняя | Высокое | Приоритизация тестов |
| RISK-005 | Нестабильная тестовая среда | Средняя | Среднее | Резервная среда |

### 9.2 Ограничения

| ID | Ограничение |
|----|-------------|
| LIM-001 | Тестирование только на Android (iOS не в scope) |
| LIM-002 | Минимальная версия Android 8.0 |
| LIM-003 | Интеграционные тесты с ЕСИА только на staging |
| LIM-004 | Нагрузочное тестирование только API |

---

## 10. РАСПИСАНИЕ ТЕСТИРОВАНИЯ

### 10.1 Фазы тестирования

| Фаза | Длительность | Описание |
|------|--------------|----------|
| Подготовка | 1 неделя | Разработка тест-кейсов, настройка среды |
| Unit-тестирование | Параллельно с разработкой | Разработчики пишут unit-тесты |
| Интеграционное тестирование | 1 неделя | После завершения модулей |
| Системное тестирование | 2 недели | Полное функциональное тестирование |
| Регрессионное тестирование | 1 неделя | После исправления дефектов |
| UAT | 1 неделя | Приёмочное тестирование заказчиком |

### 10.2 Ежедневные активности

| Активность | Время | Ответственный |
|------------|-------|---------------|
| Daily standup | 10:00 | Вся команда |
| Smoke-тесты (автоматические) | После каждого билда | CI/CD |
| Регрессия (автоматическая) | 02:00 (ночью) | CI/CD |
| Отчёт о тестировании | 17:00 | QA Lead |

---

## 11. РОЛИ И ОТВЕТСТВЕННОСТИ

| Роль | Ответственность |
|------|-----------------|
| **QA Lead** | Планирование тестирования, координация, отчётность |
| **QA Engineer** | Разработка и выполнение тестов, регистрация дефектов |
| **Automation Engineer** | Разработка автотестов, поддержка CI/CD |
| **Developer** | Unit-тесты, исправление дефектов |
| **DevOps** | Настройка тестовых сред, CI/CD |
| **Product Owner** | UAT, приоритизация дефектов |

---

## 12. ПРИЛОЖЕНИЯ

### Приложение А. Чек-лист Smoke-тестирования

| № | Проверка | Статус |
|---|----------|--------|
| 1 | Приложение устанавливается | ☐ |
| 2 | Приложение запускается без crash | ☐ |
| 3 | Отображается экран авторизации | ☐ |
| 4 | Кнопка "Войти через Госуслуги" кликабельна | ☐ |
| 5 | Кнопка "Войти через ВКонтакте" кликабельна | ☐ |
| 6 | После авторизации открывается главный экран | ☐ |
| 7 | Bottom Navigation отображается | ☐ |
| 8 | Переход на Карточку работает | ☐ |
| 9 | Переход на Лидеры работает | ☐ |
| 10 | Переход на Настройки работает | ☐ |
| 11 | Карточка отображает ФИО | ☐ |
| 12 | Карточка отображает KPI | ☐ |
| 13 | Таблица лидеров загружается | ☐ |
| 14 | Фильтр по отделам открывается | ☐ |
| 15 | Выход из аккаунта работает | ☐ |

### Приложение Б. Матрица трассировки требований

| Требование | Тестовые случаи |
|------------|-----------------|
| AUTH-001 | TC-AUTH-001, TC-AUTH-002, TC-AUTH-003, TC-AUTH-004, TC-AUTH-005 |
| AUTH-002 | TC-AUTH-006, TC-AUTH-007, TC-AUTH-008, TC-AUTH-009 |
| AUTH-003 | TC-AUTH-001, TC-AUTH-006 |
| AUTH-004 | TC-AUTH-001, TC-AUTH-006 |
| AUTH-005 | TC-AUTH-010 |
| AUTH-006 | TC-AUTH-011 |
| AUTH-007 | TC-AUTH-013, TC-AUTH-014 |
| AUTH-008 | TC-AUTH-003, TC-AUTH-004, TC-AUTH-005 |
| PROFILE-001 | TC-PROFILE-001 |
| PROFILE-002 | TC-PROFILE-002, TC-PROFILE-003 |
| PROFILE-003 | (Негативный тест — отсутствие UI элемента) |
| PROFILE-004 | TC-PROFILE-004 |
| PROFILE-005 | TC-PROFILE-005, TC-PROFILE-006 |
| PROFILE-006 | TC-PROFILE-007, TC-PROFILE-008, TC-PROFILE-009, TC-PROFILE-010 |
| PROFILE-007 | TC-PROFILE-007 |
| PROFILE-008 | TC-PROFILE-007 |
| PROFILE-009 | TC-PROFILE-011, TC-PROFILE-012, TC-PROFILE-013, TC-PROFILE-014, TC-PROFILE-015 |
| PROFILE-010 | TC-PROFILE-017 |
| PROFILE-011 | TC-PROFILE-016 |
| LB-001 | TC-LB-001 |
| LB-002 | TC-LB-002 |
| LB-003 | TC-LB-005, TC-LB-006 |
| LB-004 | TC-LB-007 |
| LB-005 | TC-LB-008 |
| LB-006 | TC-LB-006 |
| LB-007 | TC-LB-003 |
| LB-008 | TC-LB-004 |
| LB-009 | TC-LB-010, TC-LB-011, TC-LB-012 |
| LB-010 | TC-LB-010, TC-LB-014 |
| LB-011 | TC-LB-011 |
| LB-012 | TC-LB-013 |
| LB-013 | (Аналогично TC-PROFILE-016) |
| LB-014 | TC-LB-016, TC-LB-017, TC-LB-018, TC-LB-019 |
| LB-015 | TC-LB-020, TC-LB-021 |
| NAV-001 | TC-NAV-001 |
| NAV-002 | TC-NAV-001 |
| NAV-003 | TC-NAV-003 |
| NAV-004 | TC-NAV-002 |
| NAV-005 | TC-NAV-007, TC-NAV-008 |

### Приложение В. Шаблон отчёта о тестировании

```
ОТЧЁТ О ТЕСТИРОВАНИИ
====================

Проект: KPI Dashboard
Версия: X.Y.Z
Период: [дата начала] - [дата окончания]
Составил: [ФИО]

1. РЕЗЮМЕ
---------
Общий статус: [PASSED / FAILED / BLOCKED]
Готовность к релизу: [ДА / НЕТ]

2. МЕТРИКИ
----------
Всего тестов: XXX
Выполнено: XXX (XX%)
Пройдено: XXX (XX%)
Провалено: XXX (XX%)
Пропущено: XXX (XX%)
Заблокировано: XXX (XX%)

3. ДЕФЕКТЫ
----------
Открыто: XX
  - Blocker: X
  - Critical: X
  - Major: X
  - Minor: X

Закрыто в этом цикле: XX

4. ПОКРЫТИЕ ТРЕБОВАНИЙ
----------------------
Покрыто тестами: XX%
Непокрытые требования: [список]

5. РИСКИ И РЕКОМЕНДАЦИИ
-----------------------
[Описание рисков и рекомендаций]

6. ВЫВОД
--------
[Заключение о качестве продукта]
```

---

## СОГЛАСОВАНО

| Роль | ФИО | Подпись | Дата |
|------|-----|---------|------|
| QA Lead | ______________ | __________ | __.__.2025 |
| Руководитель проекта | ______________ | __________ | __.__.2025 |
| Ведущий разработчик | ______________ | __________ | __.__.2025 |

---

**Конец документа**
