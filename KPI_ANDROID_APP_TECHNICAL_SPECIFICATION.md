# ТЕХНИЧЕСКОЕ ЗАДАНИЕ

## на разработку мобильного приложения «KPI Dashboard»

### для операционной системы Android

---

**Версия документа:** 1.0  
**Дата создания:** 29.11.2025  
**Статус:** Проект

---

## СОДЕРЖАНИЕ

1. [Общие сведения](#1-общие-сведения)
2. [Глоссарий и термины](#2-глоссарий-и-термины)
3. [Назначение и цели создания системы](#3-назначение-и-цели-создания-системы)
4. [Характеристика объекта автоматизации](#4-характеристика-объекта-автоматизации)
5. [Требования к системе](#5-требования-к-системе)
   - 5.1 [Функциональные требования](#51-функциональные-требования)
   - 5.2 [Требования к пользовательскому интерфейсу](#52-требования-к-пользовательскому-интерфейсу)
   - 5.3 [Требования к аутентификации](#53-требования-к-аутентификации)
   - 5.4 [Требования к базе данных](#54-требования-к-базе-данных)
   - 5.5 [Требования к API](#55-требования-к-api)
   - 5.6 [Требования к безопасности](#56-требования-к-безопасности)
   - 5.7 [Требования к производительности](#57-требования-к-производительности)
   - 5.8 [Требования к надёжности](#58-требования-к-надёжности)
6. [Нефункциональные требования](#6-нефункциональные-требования)
7. [Состав и содержание работ](#7-состав-и-содержание-работ)
8. [Порядок контроля и приёмки](#8-порядок-контроля-и-приёмки)
9. [Требования к документации](#9-требования-к-документации)
10. [Приложения](#10-приложения)

---

## 1. ОБЩИЕ СВЕДЕНИЯ

### 1.1 Полное наименование системы

**Полное наименование:** Мобильное приложение для просмотра ключевых показателей эффективности сотрудников «KPI Dashboard»

**Краткое наименование:** KPI Dashboard

### 1.2 Заказчик

**Наименование организации-заказчика:** [Наименование организации]  
**Юридический адрес:** [Адрес]  
**Контактное лицо:** [ФИО]  
**Телефон:** [Номер телефона]  
**Email:** [Электронная почта]

### 1.3 Исполнитель

**Наименование организации-исполнителя:** [Наименование организации]  
**Юридический адрес:** [Адрес]  
**Контактное лицо:** [ФИО]  
**Телефон:** [Номер телефона]  
**Email:** [Электронная почта]

### 1.4 Основание для разработки

Основанием для разработки системы является:
- Договор № [номер] от [дата]
- Техническое задание, согласованное с Заказчиком

### 1.5 Плановые сроки начала и окончания работ

| Этап | Начало | Окончание |
|------|--------|-----------|
| Проектирование | [дата] | [дата] |
| Разработка | [дата] | [дата] |
| Тестирование | [дата] | [дата] |
| Внедрение | [дата] | [дата] |

### 1.6 Порядок оформления и предъявления результатов работ

Результаты работ предъявляются Заказчику в следующем порядке:
1. Промежуточные результаты — по окончании каждого этапа разработки
2. Окончательные результаты — по завершении всех работ

---

## 2. ГЛОССАРИЙ И ТЕРМИНЫ

| Термин | Определение |
|--------|-------------|
| **KPI** | Key Performance Indicator — ключевой показатель эффективности, числовая метрика, отражающая результативность деятельности сотрудника |
| **Android** | Мобильная операционная система, разработанная компанией Google |
| **Material Design 3 (M3)** | Актуальная система дизайна от Google для создания пользовательских интерфейсов |
| **PostgreSQL** | Объектно-реляционная система управления базами данных (СУБД) |
| **OAuth 2.0** | Открытый протокол авторизации |
| **REST API** | Архитектурный стиль взаимодействия компонентов распределённого приложения |
| **Госуслуги (ЕСИА)** | Единая система идентификации и аутентификации граждан РФ |
| **VK ID** | Система аутентификации социальной сети ВКонтакте |
| **JWT** | JSON Web Token — стандарт для создания токенов доступа |
| **HTTPS** | Расширение протокола HTTP с поддержкой шифрования |
| **TLS** | Transport Layer Security — протокол криптографической защиты данных |
| **Таблица лидеров** | Визуальное представление ранжированного списка сотрудников по показателю KPI |
| **Bottom Navigation Bar** | Нижняя навигационная панель — элемент интерфейса Material Design |
| **Карточка пользователя** | Экран с персональной информацией и показателями сотрудника |

---

## 3. НАЗНАЧЕНИЕ И ЦЕЛИ СОЗДАНИЯ СИСТЕМЫ

### 3.1 Назначение системы

Система предназначена для:
- Просмотра персональных ключевых показателей эффективности (KPI) сотрудниками организации
- Визуализации рейтинга сотрудников в форме таблицы лидеров
- Отслеживания динамики KPI за период
- Обеспечения прозрачности и мотивации персонала

### 3.2 Цели создания системы

| № | Цель | Критерий достижения |
|---|------|---------------------|
| 1 | Обеспечение доступа сотрудников к персональным KPI | 100% авторизованных пользователей имеют доступ к своим данным |
| 2 | Визуализация рейтинга сотрудников | Корректное отображение таблицы лидеров с возможностью фильтрации по отделам |
| 3 | Повышение мотивации персонала | Наличие визуальных выделений для лидеров (топ-3) |
| 4 | Обеспечение безопасности данных | Соответствие требованиям ФЗ-152 «О персональных данных» |

---

## 4. ХАРАКТЕРИСТИКА ОБЪЕКТА АВТОМАТИЗАЦИИ

### 4.1 Краткие сведения об организации

Организация использует систему оценки эффективности сотрудников на основе KPI. Данные о показателях хранятся в централизованной базе данных PostgreSQL на сервере организации.

### 4.2 Структура организации

Организация имеет иерархическую структуру с разделением на отделы. Каждый сотрудник принадлежит к одному отделу.

### 4.3 Характеристика существующей системы

На момент разработки ТЗ:
- Данные KPI хранятся в СУБД PostgreSQL
- Отсутствует мобильное приложение для просмотра KPI
- Доступ к данным осуществляется через внутренние системы организации

---

## 5. ТРЕБОВАНИЯ К СИСТЕМЕ

### 5.1 Функциональные требования

#### 5.1.1 Модуль аутентификации (AUTH)

| ID | Требование | Приоритет | Примечание |
|----|------------|-----------|------------|
| AUTH-001 | Система ДОЛЖНА поддерживать аутентификацию через ЕСИА (Госуслуги) по протоколу OAuth 2.0 | Обязательный | Согласно требованиям ЕСИА |
| AUTH-002 | Система ДОЛЖНА поддерживать аутентификацию через VK ID по протоколу OAuth 2.0 | Обязательный | Согласно требованиям VK ID SDK |
| AUTH-003 | Система ДОЛЖНА отображать экран выбора способа авторизации при первом запуске приложения | Обязательный | Выбор: Госуслуги или ВКонтакте |
| AUTH-004 | Система НЕ ДОЛЖНА предоставлять доступ к функционалу приложения неавторизованным пользователям | Обязательный | Блокировка всех экранов кроме авторизации |
| AUTH-005 | Система ДОЛЖНА сохранять сессию авторизации на устройстве | Обязательный | Токен хранится в EncryptedSharedPreferences |
| AUTH-006 | Система ДОЛЖНА автоматически продлевать сессию при наличии действительного refresh token | Обязательный | Без повторной авторизации пользователя |
| AUTH-007 | Система ДОЛЖНА предоставлять возможность выхода из аккаунта | Обязательный | Через раздел «Настройки» |
| AUTH-008 | Система ДОЛЖНА корректно обрабатывать ошибки аутентификации и отображать соответствующие сообщения | Обязательный | Локализованные сообщения на русском языке |

#### 5.1.2 Модуль «Карточка пользователя» (PROFILE)

| ID | Требование | Приоритет | Примечание |
|----|------------|-----------|------------|
| PROFILE-001 | Система ДОЛЖНА отображать ФИО пользователя | Обязательный | Формат: Фамилия Имя Отчество |
| PROFILE-002 | Система ДОЛЖНА отображать фотографию пользователя | Обязательный | Источник: VK ID / ЕСИА / БД организации |
| PROFILE-003 | Система НЕ ДОЛЖНА предоставлять пользователю возможность изменения фотографии | Обязательный | Изменение только через администратора |
| PROFILE-004 | Система ДОЛЖНА отображать название отдела пользователя | Обязательный | Полное название отдела |
| PROFILE-005 | Система ДОЛЖНА отображать текущее значение KPI пользователя | Обязательный | Формат: X.XX (две цифры после точки) |
| PROFILE-006 | Система ДОЛЖНА отображать стаж на текущем рабочем месте | Обязательный | Формат: N лет/года/год |
| PROFILE-007 | Система ДОЛЖНА отображать общий стаж в компании | Обязательный | Формат: (N лет/года/год всего) |
| PROFILE-008 | Система ДОЛЖНА отображать комбинированный стаж | Обязательный | Пример: «1 год (3 года всего)» |
| PROFILE-009 | Система ДОЛЖНА отображать график динамики KPI за последний месяц | Обязательный | Линейный график с осями X (дни) и Y (KPI) |
| PROFILE-010 | Система ДОЛЖНА обеспечивать автоматическое обновление данных при открытии экрана | Обязательный | Запрос актуальных данных с сервера |
| PROFILE-011 | Система ДОЛЖНА поддерживать ручное обновление данных (Pull-to-Refresh) | Обязательный | Жест «потянуть вниз» |

#### 5.1.3 Модуль «Таблица лидеров» (LEADERBOARD)

| ID | Требование | Приоритет | Примечание |
|----|------------|-----------|------------|
| LB-001 | Система ДОЛЖНА отображать ранжированный список сотрудников по убыванию KPI | Обязательный | Сортировка по значению KPI DESC |
| LB-002 | Система ДОЛЖНА отображать уникальную позицию для каждого сотрудника | Обязательный | На одной позиции — один сотрудник |
| LB-003 | Система ДОЛЖНА визуально выделять 1-е место (золотая обводка + иконка трофея) | Обязательный | Цвет: #FFD700 (Gold) |
| LB-004 | Система ДОЛЖНА визуально выделять 2-е место (серебряная обводка) | Обязательный | Цвет: #C0C0C0 (Silver) |
| LB-005 | Система ДОЛЖНА визуально выделять 3-е место (бронзовая обводка) | Обязательный | Цвет: #CD7F32 (Bronze) |
| LB-006 | Система ДОЛЖНА отображать иконку трофея рядом с 1-м местом | Обязательный | Иконка Material Icons: emoji_events |
| LB-007 | Для каждой записи списка система ДОЛЖНА отображать: позицию, ФИО, отдел, KPI | Обязательный | — |
| LB-008 | Система ДОЛЖНА отображать значение KPI в формате X.XX | Обязательный | Две цифры после десятичной точки |
| LB-009 | Система ДОЛЖНА предоставлять фильтр по отделам | Обязательный | Выпадающий список (Dropdown) |
| LB-010 | Система ДОЛЖНА поддерживать вариант «Все отделы» в фильтре | Обязательный | По умолчанию |
| LB-011 | Система ДОЛЖНА отображать список всех доступных отделов в фильтре | Обязательный | Получение из БД |
| LB-012 | Система ДОЛЖНА автоматически пересчитывать позиции при применении фильтра | Обязательный | Локальный пересчёт ранга |
| LB-013 | Система ДОЛЖНА поддерживать Pull-to-Refresh для обновления данных | Обязательный | Жест «потянуть вниз» |
| LB-014 | Система ДОЛЖНА поддерживать постраничную загрузку (pagination) | Обязательный | Размер страницы: 20 записей |
| LB-015 | Система ДОЛЖНА выделять текущего пользователя в списке | Желательный | Фоновое выделение строки |

#### 5.1.4 Модуль «Настройки» (SETTINGS)

| ID | Требование | Приоритет | Примечание |
|----|------------|-----------|------------|
| SET-001 | Система ДОЛЖНА предоставлять возможность выхода из аккаунта | Обязательный | Кнопка «Выйти» |
| SET-002 | Система ДОЛЖНА отображать версию приложения | Обязательный | Формат: X.Y.Z |
| SET-003 | Система ДОЛЖНА отображать информацию «О приложении» | Желательный | Описание, разработчик |
| SET-004 | Система МОЖЕТ предоставлять возможность выбора темы оформления | Опциональный | Светлая/Тёмная/Системная |
| SET-005 | Система МОЖЕТ предоставлять настройку уведомлений | Опциональный | Включение/отключение push-уведомлений |
| SET-006 | Система ДОЛЖНА отображать ссылку на политику конфиденциальности | Обязательный | Открытие в WebView или браузере |
| SET-007 | Система ДОЛЖНА отображать ссылку на пользовательское соглашение | Обязательный | Открытие в WebView или браузере |

#### 5.1.5 Модуль навигации (NAV)

| ID | Требование | Приоритет | Примечание |
|----|------------|-----------|------------|
| NAV-001 | Система ДОЛЖНА использовать нижнюю навигационную панель (Bottom Navigation Bar) | Обязательный | Согласно Material Design 3 |
| NAV-002 | Система ДОЛЖНА отображать три элемента навигации | Обязательный | Карточка, Лидеры, Настройки |
| NAV-003 | Система ДОЛЖНА визуально выделять активный элемент навигации | Обязательный | Согласно гайдлайнам M3 |
| NAV-004 | Каждый элемент навигации ДОЛЖЕН содержать иконку и текстовую подпись | Обязательный | — |
| NAV-005 | Система ДОЛЖНА сохранять состояние экрана при переключении между разделами | Обязательный | Без потери данных и позиции скролла |

---

### 5.2 Требования к пользовательскому интерфейсу

#### 5.2.1 Общие требования к UI

| ID | Требование | Примечание |
|----|------------|------------|
| UI-001 | Интерфейс ДОЛЖЕН соответствовать спецификации Material Design 3 (M3) | Версия Material Design актуальная на 2025 год |
| UI-002 | Интерфейс ДОЛЖЕН использовать компоненты Material Design Components (MDC) для Android | Библиотека com.google.android.material |
| UI-003 | Интерфейс ДОЛЖЕН поддерживать светлую и тёмную темы | Автоматическое переключение на основе системных настроек |
| UI-004 | Интерфейс ДОЛЖЕН быть локализован на русском языке | Все тексты UI |
| UI-005 | Интерфейс ДОЛЖЕН поддерживать адаптивную вёрстку | Корректное отображение на экранах различных размеров |
| UI-006 | Интерфейс ДОЛЖЕН соответствовать требованиям доступности (Accessibility) | WCAG 2.1 Level AA |

#### 5.2.2 Цветовая схема (Material Design 3 Color System)

##### Светлая тема (Light Theme)

| Роль цвета | HEX-код | Применение |
|------------|---------|------------|
| Primary | #6750A4 | Основные акцентные элементы |
| On Primary | #FFFFFF | Текст/иконки на Primary |
| Primary Container | #EADDFF | Фоны акцентных контейнеров |
| On Primary Container | #21005D | Текст на Primary Container |
| Secondary | #625B71 | Второстепенные элементы |
| On Secondary | #FFFFFF | Текст/иконки на Secondary |
| Secondary Container | #E8DEF8 | Фоны второстепенных контейнеров |
| On Secondary Container | #1D192B | Текст на Secondary Container |
| Tertiary | #7D5260 | Третичные акценты |
| Error | #B3261E | Ошибки и предупреждения |
| On Error | #FFFFFF | Текст/иконки на Error |
| Surface | #FFFBFE | Основной фон поверхностей |
| On Surface | #1C1B1F | Текст на Surface |
| Surface Variant | #E7E0EC | Альтернативный фон |
| Outline | #79747E | Границы элементов |

##### Цвета выделения лидеров

| Позиция | Цвет обводки (HEX) | Название |
|---------|-------------------|----------|
| 1-е место | #FFD700 | Gold |
| 2-е место | #C0C0C0 | Silver |
| 3-е место | #CD7F32 | Bronze |

##### Тёмная тема (Dark Theme)

| Роль цвета | HEX-код | Применение |
|------------|---------|------------|
| Primary | #D0BCFF | Основные акцентные элементы |
| On Primary | #381E72 | Текст/иконки на Primary |
| Primary Container | #4F378B | Фоны акцентных контейнеров |
| On Primary Container | #EADDFF | Текст на Primary Container |
| Surface | #1C1B1F | Основной фон поверхностей |
| On Surface | #E6E1E5 | Текст на Surface |

#### 5.2.3 Типографика (Material Design 3 Type Scale)

| Стиль | Шрифт | Размер (sp) | Вес | Применение |
|-------|-------|-------------|-----|------------|
| Display Large | Roboto | 57 | Regular | Крупные заголовки |
| Display Medium | Roboto | 45 | Regular | — |
| Display Small | Roboto | 36 | Regular | — |
| Headline Large | Roboto | 32 | Regular | Заголовки экранов |
| Headline Medium | Roboto | 28 | Regular | — |
| Headline Small | Roboto | 24 | Regular | — |
| Title Large | Roboto | 22 | Regular | Заголовки секций |
| Title Medium | Roboto | 16 | Medium | Подзаголовки |
| Title Small | Roboto | 14 | Medium | — |
| Body Large | Roboto | 16 | Regular | Основной текст |
| Body Medium | Roboto | 14 | Regular | Вспомогательный текст |
| Body Small | Roboto | 12 | Regular | Мелкий текст |
| Label Large | Roboto | 14 | Medium | Метки кнопок |
| Label Medium | Roboto | 12 | Medium | — |
| Label Small | Roboto | 11 | Medium | Метки элементов |

#### 5.2.4 Иконография

| Элемент | Иконка (Material Symbols) | Размер (dp) |
|---------|---------------------------|-------------|
| Навигация: Карточка | person | 24 |
| Навигация: Лидеры | leaderboard | 24 |
| Навигация: Настройки | settings | 24 |
| Трофей (1 место) | emoji_events | 24 |
| Выход | logout | 24 |
| Фильтр | filter_list | 24 |
| Обновление | refresh | 24 |

#### 5.2.5 Компоненты UI (Material Design 3)

##### 5.2.5.1 Bottom Navigation Bar

| Параметр | Значение |
|----------|----------|
| Высота | 80 dp |
| Количество элементов | 3 |
| Иконка (неактивная) | On Surface Variant |
| Иконка (активная) | On Secondary Container |
| Подпись (неактивная) | On Surface Variant |
| Подпись (активная) | On Surface |
| Индикатор активного элемента | Secondary Container, 64x32 dp, радиус 16 dp |
| Тень (elevation) | 3 dp |

##### 5.2.5.2 Top App Bar

| Параметр | Значение |
|----------|----------|
| Тип | Small Top App Bar |
| Высота | 64 dp |
| Заголовок | Title Large |
| Фон | Surface |
| Иконки действий | 24 dp, On Surface Variant |

##### 5.2.5.3 Cards (Карточки)

| Параметр | Значение |
|----------|----------|
| Тип | Elevated Card / Outlined Card |
| Радиус углов | 12 dp |
| Elevation (Elevated) | 1 dp |
| Ширина обводки (Outlined) | 1 dp |
| Внутренний отступ | 16 dp |

##### 5.2.5.4 List Items (Элементы списка)

| Параметр | Значение |
|----------|----------|
| Высота (one-line) | 56 dp |
| Высота (two-line) | 72 dp |
| Высота (three-line) | 88 dp |
| Отступ слева | 16 dp |
| Отступ справа | 24 dp |
| Размер ведущего элемента | 40 dp (аватар), 24 dp (иконка) |

##### 5.2.5.5 Dropdown Menu

| Параметр | Значение |
|----------|----------|
| Компонент | Exposed Dropdown Menu |
| Минимальная ширина | 280 dp |
| Высота элемента | 48 dp |
| Радиус углов меню | 4 dp |
| Elevation | 8 dp |

##### 5.2.5.6 Buttons (Кнопки)

| Тип кнопки | Высота | Радиус углов | Применение |
|------------|--------|--------------|------------|
| Filled Button | 40 dp | 20 dp | Основные действия (Войти) |
| Outlined Button | 40 dp | 20 dp | Второстепенные действия |
| Text Button | 40 dp | 20 dp | Третичные действия |
| FAB | 56 dp | 16 dp | Плавающие действия (не используется) |

##### 5.2.5.7 Progress Indicators

| Тип | Размер | Применение |
|-----|--------|------------|
| Circular | 48 dp | Загрузка данных (в центре экрана) |
| Linear | Во всю ширину | Pull-to-Refresh |

#### 5.2.6 Отступы и сетка

| Параметр | Значение |
|----------|----------|
| Отступы контента от краёв экрана | 16 dp |
| Вертикальный отступ между элементами | 8 dp / 16 dp |
| Отступы внутри карточек | 16 dp |
| Отступы в Bottom Navigation | 12 dp (вертикально) |

#### 5.2.7 Анимации и переходы

| Параметр | Значение |
|----------|----------|
| Стандартная длительность | 300 ms |
| Кривая анимации | EmphasizedEasing (M3) |
| Fade-анимация | 150 ms |
| Переключение экранов | Fade-through (300 ms) |

---

### 5.3 Требования к аутентификации

#### 5.3.1 Аутентификация через ЕСИА (Госуслуги)

| ID | Требование |
|----|------------|
| ESIA-001 | Интеграция ДОЛЖНА осуществляться через официальный REST API ЕСИА |
| ESIA-002 | Приложение ДОЛЖНО быть зарегистрировано в системе ЕСИА |
| ESIA-003 | Авторизация ДОЛЖНА выполняться по протоколу OAuth 2.0 Authorization Code Flow |
| ESIA-004 | Система ДОЛЖНА запрашивать следующие scope: openid, fullname, email |
| ESIA-005 | После успешной авторизации система ДОЛЖНА получать: ФИО, СНИЛС, email |
| ESIA-006 | Система ДОЛЖНА связывать учётную запись ЕСИА с записью сотрудника в БД по СНИЛС или email |

#### 5.3.2 Аутентификация через VK ID

| ID | Требование |
|----|------------|
| VKID-001 | Интеграция ДОЛЖНА осуществляться через VK ID SDK для Android |
| VKID-002 | Приложение ДОЛЖНО быть зарегистрировано в VK для разработчиков |
| VKID-003 | Авторизация ДОЛЖНА выполняться по протоколу OAuth 2.0 |
| VKID-004 | Система ДОЛЖНА запрашивать следующие scope: vkid.personal_info, email, phone |
| VKID-005 | После успешной авторизации система ДОЛЖНА получать: ФИО, фото профиля, email, телефон |
| VKID-006 | Система ДОЛЖНА связывать учётную запись VK с записью сотрудника в БД по email или телефону |

#### 5.3.3 Управление сессией

| ID | Требование |
|----|------------|
| SESSION-001 | Access Token ДОЛЖЕН храниться в EncryptedSharedPreferences |
| SESSION-002 | Refresh Token ДОЛЖЕН храниться в EncryptedSharedPreferences |
| SESSION-003 | Время жизни Access Token: 1 час |
| SESSION-004 | Время жизни Refresh Token: 30 дней |
| SESSION-005 | При истечении Access Token система ДОЛЖНА автоматически запрашивать новый с помощью Refresh Token |
| SESSION-006 | При истечении Refresh Token пользователь ДОЛЖЕН быть перенаправлен на экран авторизации |

---

### 5.4 Требования к базе данных

#### 5.4.1 Серверная СУБД

| Параметр | Значение |
|----------|----------|
| СУБД | PostgreSQL |
| Версия | 15.x или выше |
| Кодировка | UTF-8 |
| Сопоставление (Collation) | ru_RU.UTF-8 |

#### 5.4.2 Схема базы данных

##### Таблица `employees` (Сотрудники)

| Поле | Тип | Ограничения | Описание |
|------|-----|-------------|----------|
| id | UUID | PRIMARY KEY | Уникальный идентификатор сотрудника |
| first_name | VARCHAR(100) | NOT NULL | Имя |
| last_name | VARCHAR(100) | NOT NULL | Фамилия |
| middle_name | VARCHAR(100) | NULL | Отчество |
| email | VARCHAR(255) | UNIQUE, NOT NULL | Электронная почта |
| phone | VARCHAR(20) | NULL | Телефон |
| snils | VARCHAR(14) | UNIQUE, NULL | СНИЛС (XXX-XXX-XXX XX) |
| photo_url | VARCHAR(500) | NULL | URL фотографии |
| department_id | UUID | FOREIGN KEY | ID отдела |
| position_start_date | DATE | NOT NULL | Дата начала работы на текущей должности |
| company_start_date | DATE | NOT NULL | Дата начала работы в компании |
| vk_user_id | BIGINT | UNIQUE, NULL | ID пользователя VK |
| esia_user_id | VARCHAR(100) | UNIQUE, NULL | ID пользователя ЕСИА |
| is_active | BOOLEAN | DEFAULT TRUE | Активность учётной записи |
| created_at | TIMESTAMP | DEFAULT NOW() | Дата создания записи |
| updated_at | TIMESTAMP | DEFAULT NOW() | Дата обновления записи |

##### Таблица `departments` (Отделы)

| Поле | Тип | Ограничения | Описание |
|------|-----|-------------|----------|
| id | UUID | PRIMARY KEY | Уникальный идентификатор отдела |
| name | VARCHAR(255) | NOT NULL, UNIQUE | Название отдела |
| description | TEXT | NULL | Описание отдела |
| parent_id | UUID | FOREIGN KEY (departments.id), NULL | ID родительского отдела |
| created_at | TIMESTAMP | DEFAULT NOW() | Дата создания записи |

##### Таблица `kpi_records` (Записи KPI)

| Поле | Тип | Ограничения | Описание |
|------|-----|-------------|----------|
| id | UUID | PRIMARY KEY | Уникальный идентификатор записи |
| employee_id | UUID | FOREIGN KEY (employees.id), NOT NULL | ID сотрудника |
| value | DECIMAL(5,2) | NOT NULL | Значение KPI (XXX.XX) |
| recorded_at | DATE | NOT NULL | Дата записи KPI |
| created_at | TIMESTAMP | DEFAULT NOW() | Дата создания записи |

##### Индексы

```sql
CREATE INDEX idx_kpi_records_employee_id ON kpi_records(employee_id);
CREATE INDEX idx_kpi_records_recorded_at ON kpi_records(recorded_at);
CREATE INDEX idx_kpi_records_employee_date ON kpi_records(employee_id, recorded_at);
CREATE INDEX idx_employees_department_id ON employees(department_id);
CREATE INDEX idx_employees_email ON employees(email);
CREATE INDEX idx_employees_vk_user_id ON employees(vk_user_id);
CREATE INDEX idx_employees_esia_user_id ON employees(esia_user_id);
```

#### 5.4.3 Локальное хранилище (Android)

| Параметр | Значение |
|----------|----------|
| Тип | Room (SQLite) |
| Кэширование | Да (для offline-режима) |
| Шифрование | SQLCipher (опционально) |

---

### 5.5 Требования к API

#### 5.5.1 Общие требования

| ID | Требование |
|----|------------|
| API-001 | API ДОЛЖЕН реализовывать архитектурный стиль REST |
| API-002 | Формат обмена данными: JSON |
| API-003 | Кодировка: UTF-8 |
| API-004 | Версионирование API через URL (например, /api/v1/) |
| API-005 | Аутентификация запросов через Bearer Token (JWT) |
| API-006 | Все запросы ДОЛЖНЫ использовать HTTPS |

#### 5.5.2 Endpoints

##### Аутентификация

| Метод | Endpoint | Описание |
|-------|----------|----------|
| POST | /api/v1/auth/vk | Аутентификация через VK ID |
| POST | /api/v1/auth/esia | Аутентификация через ЕСИА |
| POST | /api/v1/auth/refresh | Обновление токена |
| POST | /api/v1/auth/logout | Выход из системы |

##### Профиль пользователя

| Метод | Endpoint | Описание |
|-------|----------|----------|
| GET | /api/v1/profile | Получение профиля текущего пользователя |
| GET | /api/v1/profile/kpi | Получение текущего KPI пользователя |
| GET | /api/v1/profile/kpi/history | Получение истории KPI (за месяц) |

##### Таблица лидеров

| Метод | Endpoint | Описание |
|-------|----------|----------|
| GET | /api/v1/leaderboard | Получение таблицы лидеров |
| GET | /api/v1/leaderboard?department_id={id} | Фильтрация по отделу |
| GET | /api/v1/departments | Получение списка отделов |

#### 5.5.3 Формат ответов

##### Успешный ответ

```json
{
  "success": true,
  "data": { ... },
  "meta": {
    "page": 1,
    "per_page": 20,
    "total": 100,
    "total_pages": 5
  }
}
```

##### Ответ с ошибкой

```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "Описание ошибки",
    "details": { ... }
  }
}
```

#### 5.5.4 Коды ошибок

| HTTP-код | Код ошибки | Описание |
|----------|------------|----------|
| 400 | BAD_REQUEST | Некорректный запрос |
| 401 | UNAUTHORIZED | Не авторизован |
| 403 | FORBIDDEN | Доступ запрещён |
| 404 | NOT_FOUND | Ресурс не найден |
| 422 | VALIDATION_ERROR | Ошибка валидации |
| 429 | RATE_LIMIT_EXCEEDED | Превышен лимит запросов |
| 500 | INTERNAL_ERROR | Внутренняя ошибка сервера |

---

### 5.6 Требования к безопасности

#### 5.6.1 Защита данных

| ID | Требование |
|----|------------|
| SEC-001 | Все сетевые запросы ДОЛЖНЫ выполняться через HTTPS (TLS 1.3) |
| SEC-002 | Токены авторизации ДОЛЖНЫ храниться в EncryptedSharedPreferences |
| SEC-003 | Приложение ДОЛЖНО реализовывать Certificate Pinning |
| SEC-004 | Запрещается хранение персональных данных в логах |
| SEC-005 | Приложение ДОЛЖНО соответствовать требованиям ФЗ-152 «О персональных данных» |
| SEC-006 | Приложение ДОЛЖНО запрашивать минимально необходимые разрешения |

#### 5.6.2 Защита от угроз

| ID | Требование |
|----|------------|
| SEC-007 | Приложение ДОЛЖНО обнаруживать root-доступ на устройстве (опционально блокировать) |
| SEC-008 | Приложение ДОЛЖНО обнаруживать запуск в эмуляторе (опционально блокировать) |
| SEC-009 | Приложение ДОЛЖНО использовать обфускацию кода (ProGuard/R8) |
| SEC-010 | API ДОЛЖЕН реализовывать Rate Limiting (100 запросов/минута на пользователя) |
| SEC-011 | API ДОЛЖЕН защищаться от SQL-инъекций (параметризованные запросы) |
| SEC-012 | API ДОЛЖЕН защищаться от XSS-атак (экранирование данных) |

#### 5.6.3 Аудит и логирование

| ID | Требование |
|----|------------|
| SEC-013 | Система ДОЛЖНА логировать все попытки авторизации |
| SEC-014 | Система ДОЛЖНА логировать все операции с данными |
| SEC-015 | Логи ДОЛЖНЫ храниться не менее 90 дней |
| SEC-016 | Логи НЕ ДОЛЖНЫ содержать персональные данные в открытом виде |

---

### 5.7 Требования к производительности

| ID | Требование | Метрика |
|----|------------|---------|
| PERF-001 | Время холодного запуска приложения | ≤ 3 секунды |
| PERF-002 | Время горячего запуска приложения | ≤ 1 секунда |
| PERF-003 | Время отклика API | ≤ 500 мс (p95) |
| PERF-004 | Время загрузки таблицы лидеров (первая страница) | ≤ 2 секунды |
| PERF-005 | Время загрузки профиля пользователя | ≤ 1 секунда |
| PERF-006 | Частота кадров UI | ≥ 60 FPS |
| PERF-007 | Потребление памяти (RAM) | ≤ 150 MB |
| PERF-008 | Размер APK | ≤ 30 MB |
| PERF-009 | Размер кэша | ≤ 50 MB |
| PERF-010 | Пропускная способность API | ≥ 1000 RPS |

---

### 5.8 Требования к надёжности

| ID | Требование | Метрика |
|----|------------|---------|
| REL-001 | Доступность системы (Uptime) | ≥ 99.5% |
| REL-002 | Среднее время восстановления (MTTR) | ≤ 4 часа |
| REL-003 | Максимальное время простоя | ≤ 4 часа/месяц |
| REL-004 | Частота отказов приложения (Crash Rate) | ≤ 0.1% |
| REL-005 | Частота ANR (Application Not Responding) | ≤ 0.05% |

---

### 5.9 Требования к обработке ошибок и offline-режиму

#### 5.9.1 Обработка сетевых ошибок

| ID | Требование | Приоритет |
|----|------------|-----------|
| ERR-001 | Система ДОЛЖНА отображать информативные сообщения при отсутствии сетевого соединения | Обязательный |
| ERR-002 | Система ДОЛЖНА предоставлять возможность повторной попытки запроса при ошибке сети | Обязательный |
| ERR-003 | Система ДОЛЖНА отображать состояние загрузки (индикатор прогресса) при выполнении запросов | Обязательный |
| ERR-004 | Система ДОЛЖНА корректно обрабатывать таймауты сетевых запросов (30 секунд) | Обязательный |
| ERR-005 | Система ДОЛЖНА логировать все сетевые ошибки для диагностики | Обязательный |

#### 5.9.2 Offline-режим

| ID | Требование | Приоритет |
|----|------------|-----------|
| OFFLINE-001 | Система ДОЛЖНА кэшировать данные профиля пользователя локально | Обязательный |
| OFFLINE-002 | Система ДОЛЖНА кэшировать таблицу лидеров локально | Обязательный |
| OFFLINE-003 | При отсутствии сети система ДОЛЖНА отображать кэшированные данные с пометкой о дате последнего обновления | Обязательный |
| OFFLINE-004 | Система ДОЛЖНА автоматически синхронизировать данные при восстановлении соединения | Обязательный |
| OFFLINE-005 | Система ДОЛЖНА отображать индикатор offline-режима в UI | Желательный |

#### 5.9.3 Обработка ошибок авторизации

| ID | Требование | Приоритет |
|----|------------|-----------|
| AUTH-ERR-001 | При ошибке OAuth система ДОЛЖНА отображать понятное сообщение на русском языке | Обязательный |
| AUTH-ERR-002 | При отмене авторизации пользователем система ДОЛЖНА вернуть его на экран выбора способа входа | Обязательный |
| AUTH-ERR-003 | При невозможности связать учётную запись с сотрудником система ДОЛЖНА отображать сообщение «Пользователь не найден в системе» | Обязательный |
| AUTH-ERR-004 | Система ДОЛЖНА предоставлять контактные данные службы поддержки при ошибках авторизации | Желательный |

---

## 6. НЕФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ

### 6.1 Требования к совместимости

| ID | Требование |
|----|------------|
| COMPAT-001 | Минимальная версия Android: 8.0 (API Level 26) |
| COMPAT-002 | Целевая версия Android: 14 (API Level 34) |
| COMPAT-003 | Поддерживаемые архитектуры: arm64-v8a, armeabi-v7a, x86_64 |
| COMPAT-004 | Поддерживаемые размеры экранов: normal, large, xlarge |
| COMPAT-005 | Поддерживаемые плотности экрана: mdpi, hdpi, xhdpi, xxhdpi, xxxhdpi |

### 6.2 Требования к сопровождению

| ID | Требование |
|----|------------|
| MAINT-001 | Исходный код ДОЛЖЕН соответствовать стандартам Kotlin Coding Conventions |
| MAINT-002 | Покрытие кода unit-тестами: ≥ 70% |
| MAINT-003 | Документирование публичных API (KDoc) |
| MAINT-004 | Использование системы контроля версий Git |
| MAINT-005 | CI/CD пайплайн для автоматической сборки и тестирования |

### 6.3 Технологический стек

| Компонент | Технология | Версия |
|-----------|------------|--------|
| Язык программирования | Kotlin | 1.9.x |
| Фреймворк UI | Jetpack Compose | 1.6.x |
| Архитектурный паттерн | MVVM + Clean Architecture | — |
| DI | Hilt | 2.50+ |
| Сетевой слой | Retrofit + OkHttp | 2.9.x / 4.12.x |
| Сериализация | Kotlinx Serialization | 1.6.x |
| Локальная БД | Room | 2.6.x |
| Навигация | Navigation Compose | 2.7.x |
| Асинхронность | Kotlin Coroutines + Flow | 1.8.x |
| Загрузка изображений | Coil | 2.5.x |
| Графики | Vico / MPAndroidChart | Актуальная версия |
| Тестирование | JUnit, Mockk, Espresso | — |

---

## 7. СОСТАВ И СОДЕРЖАНИЕ РАБОТ

### 7.1 Этапы разработки

| № | Этап | Содержание | Результат |
|---|------|------------|-----------|
| 1 | Проектирование | Детальное проектирование архитектуры, UI/UX дизайн | Архитектурная документация, макеты в Figma |
| 2 | Разработка MVP | Реализация базового функционала | Работающее приложение с основными функциями |
| 3 | Интеграция | Интеграция с ЕСИА, VK ID, Backend API | Полностью интегрированное приложение |
| 4 | Тестирование | Модульное, интеграционное, UI тестирование | Отчёты о тестировании |
| 5 | Оптимизация | Оптимизация производительности, устранение багов | Стабильная версия |
| 6 | Релиз | Публикация в Google Play, документация | Опубликованное приложение |
| 7 | Сопровождение | Мониторинг, исправление ошибок, обновления | Поддерживаемая система |

---

## 8. ПОРЯДОК КОНТРОЛЯ И ПРИЁМКИ

### 8.1 Виды испытаний

| № | Вид испытаний | Описание |
|---|---------------|----------|
| 1 | Предварительные испытания | Проверка соответствия функциональным требованиям |
| 2 | Приёмочные испытания | Комплексная проверка системы Заказчиком |
| 3 | Опытная эксплуатация | Тестирование в реальных условиях (пилотная группа) |

### 8.2 Критерии приёмки

| № | Критерий | Условие выполнения |
|---|----------|-------------------|
| 1 | Функциональная полнота | 100% обязательных требований реализовано |
| 2 | Отсутствие критических дефектов | 0 дефектов уровня Critical/Blocker |
| 3 | Производительность | Соответствие требованиям раздела 5.7 |
| 4 | Безопасность | Отсутствие критических уязвимостей |
| 5 | Документация | Наличие полного комплекта документации |

---

## 9. ТРЕБОВАНИЯ К ДОКУМЕНТАЦИИ

### 9.1 Перечень документации

| № | Документ | Описание |
|---|----------|----------|
| 1 | Техническое задание | Настоящий документ |
| 2 | Архитектурная документация | Описание архитектуры системы |
| 3 | API документация | Спецификация REST API (OpenAPI/Swagger) |
| 4 | Руководство пользователя | Инструкция по использованию приложения |
| 5 | Руководство администратора | Инструкция по администрированию системы |
| 6 | Руководство по развёртыванию | Инструкция по установке и настройке |
| 7 | План тестирования | Программа и методика испытаний |
| 8 | Отчёт о тестировании | Результаты испытаний |

---

## 10. ПРИЛОЖЕНИЯ

### Приложение А. Макеты пользовательского интерфейса

#### А.1 Экран авторизации

```
┌─────────────────────────────────────┐
│                                     │
│                                     │
│            [LOGO]                   │
│                                     │
│       KPI Dashboard                 │
│                                     │
│                                     │
│  ┌─────────────────────────────────┐│
│  │  🏛  Войти через Госуслуги     ││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │  VK  Войти через ВКонтакте     ││
│  └─────────────────────────────────┘│
│                                     │
│                                     │
│   Нажимая кнопку, вы соглашаетесь  │
│   с Политикой конфиденциальности   │
│                                     │
└─────────────────────────────────────┘
```

#### А.2 Экран «Карточка пользователя»

```
┌─────────────────────────────────────┐
│  ←  Карточка пользователя          │
├─────────────────────────────────────┤
│                                     │
│         ┌─────────┐                 │
│         │  ФОТО   │                 │
│         │         │                 │
│         └─────────┘                 │
│                                     │
│     Иванов Иван Иванович           │
│     Отдел разработки               │
│                                     │
│  ┌─────────────────────────────────┐│
│  │      KPI: 8.75                  ││
│  └─────────────────────────────────┘│
│                                     │
│     Стаж: 1 год (3 года всего)     │
│                                     │
│  ┌─────────────────────────────────┐│
│  │    [ГРАФИК KPI ЗА МЕСЯЦ]       ││
│  │    ───────────────────         ││
│  │    /\      /\                   ││
│  │   /  \    /  \                  ││
│  │  /    \  /    \                 ││
│  │ /      \/      \                ││
│  │ 1  7  14  21  28                ││
│  └─────────────────────────────────┘│
│                                     │
├─────────────────────────────────────┤
│  [👤]      [🏆]      [⚙️]          │
│ Карточка  Лидеры  Настройки        │
└─────────────────────────────────────┘
```

#### А.3 Экран «Таблица лидеров»

```
┌─────────────────────────────────────┐
│  ←  Таблица лидеров                │
├─────────────────────────────────────┤
│  Отдел: [  Все отделы    ▼]        │
├─────────────────────────────────────┤
│                                     │
│  ╔═══════════════════════════════╗  │
│  ║ 🏆 1. Петров П.П.     9.87   ║  │
│  ║     Отдел продаж             ║  │
│  ╚═══════════════════════════════╝  │
│  ┌───────────────────────────────┐  │
│  │ 🥈 2. Сидоров С.С.    9.45   │  │
│  │     Отдел маркетинга         │  │
│  └───────────────────────────────┘  │
│  ┌───────────────────────────────┐  │
│  │ 🥉 3. Козлов К.К.     9.12   │  │
│  │     Отдел разработки         │  │
│  └───────────────────────────────┘  │
│  ┌───────────────────────────────┐  │
│  │    4. Новиков Н.Н.    8.98   │  │
│  │     Отдел поддержки          │  │
│  └───────────────────────────────┘  │
│  ┌───────────────────────────────┐  │
│  │ >> 5. Иванов И.И.     8.75   │  │ (выделен)
│  │     Отдел разработки         │  │
│  └───────────────────────────────┘  │
│                                     │
├─────────────────────────────────────┤
│  [👤]      [🏆]      [⚙️]          │
│ Карточка  Лидеры  Настройки        │
└─────────────────────────────────────┘
```

#### А.4 Экран «Настройки»

```
┌─────────────────────────────────────┐
│  ←  Настройки                      │
├─────────────────────────────────────┤
│                                     │
│  Аккаунт                           │
│  ┌─────────────────────────────────┐│
│  │  Выйти из аккаунта           > ││
│  └─────────────────────────────────┘│
│                                     │
│  Оформление                        │
│  ┌─────────────────────────────────┐│
│  │  Тема                          ││
│  │  Системная                   > ││
│  └─────────────────────────────────┘│
│                                     │
│  Информация                        │
│  ┌─────────────────────────────────┐│
│  │  О приложении                > ││
│  │  Политика конфиденциальности > ││
│  │  Пользовательское соглашение > ││
│  └─────────────────────────────────┘│
│                                     │
│                                     │
│         Версия 1.0.0               │
│                                     │
├─────────────────────────────────────┤
│  [👤]      [🏆]      [⚙️]          │
│ Карточка  Лидеры  Настройки        │
└─────────────────────────────────────┘
```

### Приложение Б. Диаграмма состояний авторизации

```
┌──────────────────────────────────────────────────────────────┐
│                                                              │
│  ┌─────────┐                                                 │
│  │  START  │                                                 │
│  └────┬────┘                                                 │
│       │                                                      │
│       ▼                                                      │
│  ┌─────────────────┐      Есть токен?      ┌──────────────┐ │
│  │ Проверка сессии │─────────ДА───────────▶│ Валидация    │ │
│  └────────┬────────┘                       │ токена       │ │
│           │НЕТ                             └──────┬───────┘ │
│           ▼                                       │         │
│  ┌─────────────────┐                    Валиден? │         │
│  │ Экран           │◀───────────НЕТ──────────────┤         │
│  │ авторизации     │                             │         │
│  └────────┬────────┘                             │ДА       │
│           │                                      ▼         │
│           │ Выбор способа              ┌──────────────────┐│
│           │                            │ Главный экран    ││
│     ┌─────┴─────┐                      │ (Bottom Nav)     ││
│     │           │                      └──────────────────┘│
│     ▼           ▼                                          │
│ ┌────────┐ ┌────────┐                                      │
│ │Госуслуги│ │ VK ID │                                      │
│ └────┬───┘ └───┬────┘                                      │
│      │         │                                           │
│      └────┬────┘                                           │
│           ▼                                                │
│    ┌──────────────┐                                        │
│    │ Получение    │                                        │
│    │ токена       │─────────Успех──────────────────────────┘
│    └──────┬───────┘
│           │Ошибка
│           ▼
│    ┌──────────────┐
│    │ Сообщение    │
│    │ об ошибке    │
│    └──────────────┘
│
└──────────────────────────────────────────────────────────────┘
```

---

## СОГЛАСОВАНО

| Роль | ФИО | Подпись | Дата |
|------|-----|---------|------|
| Руководитель проекта (Заказчик) | ______________ | __________ | __.__.2025 |
| Руководитель проекта (Исполнитель) | ______________ | __________ | __.__.2025 |
| Архитектор | ______________ | __________ | __.__.2025 |
| Ведущий разработчик | ______________ | __________ | __.__.2025 |
| Тестировщик | ______________ | __________ | __.__.2025 |

---

**Конец документа**
